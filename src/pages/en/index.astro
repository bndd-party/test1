---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getPublicEnPosts } from "@/lib/posts";

const pageTitle = "Kit Connect";

const posts = await getPublicEnPosts();

const latestPosts = posts
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 4);
---

<BaseLayout pageTitle={pageTitle} description="Figure painting, model building, and doll photography logs.">
  <section class="home-hero">
  <div class="home-hero-inner">
    <div class="home-hero-text">
      <p class="home-hero-eyebrow">Figure Modeling & Painting</p>

      <h1 class="home-hero-title">
        Kit Connect<br />
      </h1>

      <p class="home-hero-description">
        A personal log of figure/model making and doll photography<br />
      </p>
    </div>

    <div class="home-hero-media">
      <img
        src="/images/home/hero.avif"
        alt="..."
        loading="eager"
        decoding="async"
      />
    </div>
  </div>
</section>

  <section class="home-latest">
  <h2>Latest Posts</h2>

  <div class="latest-grid">
    {latestPosts.map((post) => (
      <article class="latest-tile">
        <a class="latest-tile__link" href={`/en/blog/${post.slug}/`}>
          <div class="latest-tile__thumb">
            <img
              src={post.data.coverImage ?? post.data.hero ?? "/images/home/hero.avif"}
              alt={post.data.coverAlt ?? post.data.heroAlt ?? post.data.title}
              loading="lazy"
              decoding="async"
            />

          </div>

          <h3 class="latest-tile__title">{post.data.title}</h3>
        </a>
        <time class="latest-tile__date" datetime={post.data.pubDate.toISOString()}>
          {post.data.pubDate.toLocaleDateString('en-US', { year:'numeric', month:'short', day:'numeric' })}
        </time>
      </article>
    ))}
  </div>

  <div class="more-link">
    <a href="/en/blog">View all posts →</a>
  </div>
</section>

<section class="home-aboutcats" aria-label="About and Categories">
  <div class="home-aboutcats-inner">
    <!-- 左：About -->
    <section class="home-about" aria-label="About me">
      <h2 class="home-section-title">About Me</h2>

      <p class="home-about-text">
        I make and photograph figures, dolls, and models.
      </p>

      <p class="home-about-sub">
        This blog is my personal archive of those moments.
      </p>

      <div class="home-about-links">
        <a class="home-pill" href="/en/about">Read more →</a>
      </div>
    </section>

    <article class="home-panel home-cats">
      <h2 class="home-section-title">Categories</h2>

      <ul class="cat-list">
        <li><a class="cat-pill" href="/en/tags/figure/">Figure</a></li>
        <li><a class="cat-pill" href="/en/tags/plastic_model/">Plastic_Model</a></li>
        <li><a class="cat-pill" href="/en/tags/doll/">Doll</a></li>
      </ul>

      <a class="home-panel__cta" href="/en/tags">All tags →</a>
    </article>
  </div>
</section>

</BaseLayout>
